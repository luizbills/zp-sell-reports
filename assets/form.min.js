var zpAddToCart=document.querySelector(".single_add_to_cart_button");zpAddToCart.setAttribute("disabled",!0),jQuery("form.cart").appendTo("#zp-submit-wrap");function zpGetOffset(){const e=jQuery("#zp-ajax-birth-data :input").serialize()+"&action=zp_tz_offset",t=new XMLHttpRequest;t.open("POST",zp_ajax_object.ajaxurl),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.responseType="json",t.onload=function(){if(t.status===200&&t.response)if(t.response.error){zpRemoveError();var o=document.createElement("span");o.setAttribute("class","ui-state-error"),o.textContent=t.response.error,document.getElementById("zp-ajax-birth-data").appendChild(o)}else t.response.offset_geo!==null&&t.response.offset_geo!==""&&t.response.offset_geo!="false"&&(zpRemoveError(),document.getElementById("zp-offset-wrap").style.display="block",document.getElementById("zp-offset-label").textContent=zp_ajax_object.utc+" ",document.getElementById("zp_offset_geo").value=t.response.offset_geo,document.getElementById("zp-form-tip").style.display="block",zpAddToCart.removeAttribute("disabled"))},t.send(e)}(function(e){e("#zp-fetch-birthreport").remove(),e("input[name='action']").remove(),e(".single_add_to_cart_button").on("click",t);function t(o){o.preventDefault(),e(".single_add_to_cart_button").prop("disabled",!0);var n=e("#zp-birthreport-form").serialize();e.ajax({url:zp_ajax_object.ajaxurl,type:"POST",data:{action:"zpsr_cart_item_form_data",zp_form_data:n}}).success(s=>{const a=s.data.error;if(e(".single_add_to_cart_button").prop("disabled",!1),a){const r=document.createElement("div");r.setAttribute("class","ui-state-error"),r.textContent=a,document.querySelector("form.cart").prepend(r)}else e(".single_add_to_cart_button").off("click",t),e(".single_add_to_cart_button").trigger("click")})}e("#month, #day, #year, #hour, #minute").on("change",function(){var o=!this.options[this.selectedIndex].defaultSelected;o&&zpFieldsFilled()&&zpGetOffset()})})(jQuery);function zpFieldsFilled(){var e=["geo_timezone_id","zp_long_decimal","zp_lat_decimal","place","minute","hour","year","day","month"];for(var t of e){var o=document.getElementById(t);if(o===null||o.value.length===0||!o.value.trim())return!1}return!0}function zpRemoveError(){var e=document.querySelector(".ui-state-error");e!==null&&e.parentNode.removeChild(e)}
